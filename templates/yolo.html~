<!DOCTYPE html>
<html>
    <head>
        <title>I'm looking at you, Dan</title>
	<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    </head>

    <body>


      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
      <script type="text/javascript" src="{{ url_for('static', filename='AutomaticImageMontage/js/jquery.montage.min.js') }}"></script>

      
      <!---->
      <div class="am-container" id="am-container">
	
	{% for gifs in scram %}
	
        <img src="{{ url_for('static', filename=gifs) }}" />
	
	{% endfor %}
        
	<img src="{{ url_for('static', filename='cat-resize.gif') }}" >
        
      </div>

      <script type="text/javascript">
        $(function() {

	  // Initialize array here
	  var imgarr = ["0_atsushi.gif", "0_cami.gif", "0_cassidy.gif", "0_charlyn.gif", "0_claire.gif", "0_dana.gif", "0_jimmy.gif", "0_joe.gif", "0_marcus.gif", "0_penn0.gif", "0_penn1.gif", "0_penn2.gif", "0_prince.gif", "0_ramen.gif", "0_sandile.gif", "0_shail.gif", "0_swamp0.gif", "0_swamp1.gif",  "0_swamp2.gif",  "0_swamp3.gif", "0_vuk.gif", "0_waqas.gif", "0_zack.gif"];

          var $container 	= $('#am-container'),
                  $imgs		= $container.find('img').hide(),
                  totalImgs	= $imgs.length,
                  cnt			= 0;


	  length = imgarr.length;

	  // Find a random index for the images 
	  for(var i=1, newings=''; i<=20; i++){
	    var index = Math.floor( Math.random() * length);
	    newings += '<img src="static/gifs/' + imgarr[index] + '"/>'
	  }

          // COOL NEW VARIABLES AND COOL JQUERY
	  var $newimages = $(newings);


	  $imgs.each(function(i) {
            var $img	= $(this);
            $('<img/>').load(function() {
              ++cnt;
              if( cnt === totalImgs ) {
                $imgs.show()
		$container.montage({
                  minsize	: true,
                  margin 	: 2
                });
/*	 
$newimages.imagesLoaded( function(){
	    $container.append( $newimages ).montage( 'add', $newimages );
	  });
*/
              }
            }).attr('src',$img.attr('src'));
          });

        });
      </script>

    </body>
</html>
